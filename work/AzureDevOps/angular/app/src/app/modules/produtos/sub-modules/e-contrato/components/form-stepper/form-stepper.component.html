<mat-stepper orientation="horizontal" [linear]="true" #stepper
  class="form-stepper-{{etapaAtual}} form-stepper__plus-etapaAtual mt-2">

  <mat-step [completed]="formVeiculoCompleted" state="dadosVeiculo">
    <ng-template matStepLabel>Dados do veículo</ng-template>
    <ng-template matStepContent class="mt-2">
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2" fxLayoutAlign="space-between">
        <mat-card fxFlex="auto">
          <div class="loading" *ngIf="submitLoading">
            <mat-spinner></mat-spinner>
          </div>
          <div>
            <app-dados-veiculo (formChangedEvent)="onFormChanged($event)" [tipoOperacao]="tipoOperacao"
              [contrato]="contrato" [ehFrota]="ehFrota" [retornoGravame]="retornoGravame"></app-dados-veiculo>
          </div>
          <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px" class="mt-3">
            <button mat-raised-button class="btn btn-primary bold" (click)="irParaEtapa(1)"
              [id]="getElementId(2, 'continuar', 'veiculo')">Salvar e
              continuar</button>
          </div>
        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro [options]="blocoInformacoes.dadosVeiculo"></app-bloco-informacoes-registro>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step [completed]="formContratoCompleted" state="dadosContrato">
    <ng-template matStepLabel>Dados do contrato</ng-template>
    <ng-template matStepContent>
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2">
        <mat-card fxFlex="75">
          <div class="loading" *ngIf="submitLoading">
            <mat-spinner></mat-spinner>
          </div>
          <div>
            <app-dados-contrato (formChangedEvent)="onFormChanged($event)" [tipoOperacao]="tipoOperacao"
              [contrato]="contrato"></app-dados-contrato>
          </div>
          <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px" class="mt-3">
            <button mat-button matStepperPrevious (click)="irParaEtapa(0)" class="btn-outline-secondary bold"
              [id]="getElementId(2, 'voltar', 'contrato')">Voltar</button>
            <button mat-raised-button (click)="irParaEtapa(2)" class="btn btn-primary bold"
              [id]="getElementId(2, 'continuar', 'contrato')">Salvar e
              continuar</button>
          </div>
        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro [options]="blocoInformacoes.dadosContrato"></app-bloco-informacoes-registro>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step [completed]="formFinanciamentoCompleted" state="dadosFinanciamento">
    <ng-template matStepLabel>Dados do financiamento</ng-template>
    <ng-template matStepContent>
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2">
        <mat-card fxFlex="75">
          <div class="loading" *ngIf="submitLoading">
            <mat-spinner></mat-spinner>
          </div>
          <div>
            <app-dados-financiamento (formChangedEvent)="onFormChanged($event)" [tipoOperacao]="tipoOperacao"
              [contrato]="contrato" [retornoGravame]="retornoGravame"></app-dados-financiamento>
          </div>
          <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px" class="mt-3">
            <button mat-button matStepperPrevious (click)="irParaEtapa(1)" class="btn-outline-secondary bold"
              [id]="getElementId(2, 'voltar', 'financiamento')">Voltar</button>
            <button mat-raised-button (click)="irParaEtapa(3)" class="btn btn-primary bold"
              [id]="getElementId(2, 'continuar', 'financiamento')">Salvar e
              continuar</button>
          </div>

        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro
            [options]="blocoInformacoes.dadosFinanciamento"></app-bloco-informacoes-registro>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step [completed]="formCredorCompleted" state="dadosCredor">
    <ng-template matStepLabel>Dados do credor</ng-template>
    <ng-template matStepContent>
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2">
        <mat-card fxFlex="75">
          <div class="loading" *ngIf="submitLoading">
            <mat-spinner></mat-spinner>
          </div>
          <div>
            <app-dados-credor (formChangedEvent)="onFormChanged($event)" [contrato]="contrato"
              [retornoGravame]="retornoGravame">
            </app-dados-credor>
          </div>
          <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px" class="mt-3">
            <button mat-button matStepperPrevious (click)="irParaEtapa(2)" class="btn-outline-secondary bold"
              [id]="getElementId(2, 'voltar', 'credor')">Voltar</button>
            <button mat-raised-button (click)="irParaEtapa(4)" class="btn btn-primary bold"
              [id]="getElementId(2, 'continuar', 'credor')">Salvar e
              continuar</button>
          </div>
        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro [options]="blocoInformacoes.dadosCredor"></app-bloco-informacoes-registro>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step [completed]="formDevedorCompleted" state="dadosDevedor">
    <ng-template matStepLabel>Dados do devedor</ng-template>
    <ng-template matStepContent>
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2">
        <mat-card fxFlex="75">
          <div class="loading" *ngIf="submitLoading">
            <mat-spinner></mat-spinner>
          </div>
          <div>
            <app-dados-devedor (formChangedEvent)="onFormChanged($event)" [tipoOperacao]="tipoOperacao"
              [contrato]="contrato"></app-dados-devedor>
          </div>
          <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px">
            <button mat-button matStepperPrevious (click)="irParaEtapa(3)" class="btn-outline-secondary bold"
              [id]="getElementId(2, 'voltar', 'devedor')">Voltar</button>
            <button mat-raised-button (click)="irParaEtapa(5)" class="btn btn-primary bold"
              [id]="getElementId(2, 'continuar', 'devedor')">Salvar e
              continuar</button>
          </div>
        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro [options]="blocoInformacoes.dadosDevedor"></app-bloco-informacoes-registro>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step state="revisao">
    <ng-template matStepLabel>Revisão</ng-template>
    <ng-template matStepContent>
      <div fxLayout="row" fxLayoutGap="15px" class="mt-2">
        <mat-card fxFlex="75">
          <div>
            <app-revisar-registro (editarEtapa)="editarEtapa($event)"> </app-revisar-registro>
            <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px">
              <button mat-button matStepperPrevious (click)="irParaEtapa(4)" class="btn-outline-secondary bold"
                [id]="getElementId(2, 'voltar', 'revisao')">Voltar</button>
              <button mat-raised-button matStepperNext (click)="enviarRegistro()" class="btn btn-primary bold"
                [id]="getElementId(2, 'enviar-registro')">Enviar
                registro</button>
            </div>
          </div>
        </mat-card>
        <div fxFlex="25">
          <app-bloco-informacoes-registro [options]="blocoInformacoes.revisao"></app-bloco-informacoes-registro>
          <div class="d-flex mt-1">
            <button mat-raised-button matStepperNext class="btn btn-primary btn-lg bold w-100"
              (click)="enviarRegistro()" [id]="getElementId(2, 'enviar-registro')">Enviar registro</button>
          </div>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <ng-template matStepperIcon="dadosVeiculo">
    <i class="fa-light fa-car"></i>
  </ng-template>
  <ng-template matStepperIcon="dadosContrato">
    <i class="fa-light fa-file-lines"></i>
  </ng-template>
  <ng-template matStepperIcon="dadosFinanciamento">
    <i class="fa-light fa-sack-dollar"></i>
  </ng-template>
  <ng-template matStepperIcon="dadosCredor">
    <i class="fa-light fa-building-columns"></i>
  </ng-template>
  <ng-template matStepperIcon="dadosDevedor">
    <i class="fa-light fa-user-vneck"></i>
  </ng-template>
  <ng-template matStepperIcon="revisao">
    <i class="fa-light fa-clipboard-check"></i>
  </ng-template>
  <!-- <mat-step *ngIf="uf === 'PR'" [completed]="formDevedorCompleted">
        <ng-template matStepLabel>Dados do Terceiro Garantidor</ng-template>
        <ng-template matStepContent>
            <div fxLayout="column" fxLayoutGap="15px">
                <div fxLayout="row" fxLayoutAlign="center">
                    <app-dados-terceiro-garantidor (formChangedEvent)="onFormChanged($event)" [tipoOperacao]="tipoOperacao" [contrato]="contrato"></app-dados-terceiro-garantidor>
                </div>
                <div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="15px">
                    <button mat-button matStepperPrevious (click)="irParaEtapa(4)">Voltar</button>
                    <button mat-raised-button matStepperNext (click)="revisarRegistro()" class="btn btn-primary btn-lg">Revisar e Registrar</button>
                </div>
            </div>
        </ng-template>
    </mat-step> -->
  <!--descomentar linhas acima após implementação do terceiro garantidor-->
</mat-stepper>
<form [formGroup]="formulario" novalidate>
  <input type="hidden" name="formVeiculo" formControlName="formVeiculo">
  <input type="hidden" name="formContrato" formControlName="formContrato">
  <input type="hidden" name="formComplemento" formControlName="formComplemento">
  <input type="hidden" name="formFinanciamento" formControlName="formFinanciamento">
  <input type="hidden" name="formCredor" formControlName="formCredor">
  <input type="hidden" name="formDevedor" formControlName="formDevedor">
</form>